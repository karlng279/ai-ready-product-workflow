# ST-014: User Authentication Flow

**Story ID:** ST-014  
**Module:** Platform  
**Priority:** Must-have  
**Status:** Draft  
**Story Points:** 3  
**Tags:** authentication, login, security, mvp  
**Dependencies:** â€”  
**Related Stories:** ST-012 (User Profile)

---

## User Story

> **As a** User (Buyer/Seller/Service Provider),  
> **I want to** log in and log out of the platform,  
> **So that** I can access my personalized features (inventory, bids, profile) and manage my account securely.

---

## Acceptance Criteria

### AC-001: Login Modal
- **Given** I am not logged in
- **When** I click the "Login" button in the top-right user menu
- **Then** a modal appears with email and password fields
- **And** I can submit my credentials to log in

### AC-002: Successful Login
- **Given** I have entered valid credentials
- **When** I click "Login"
- **Then** the modal closes
- **And** my user avatar appears in the top-right
- **And** I can access the user dropdown menu

### AC-003: User Dropdown Menu (Logged In)
- **Given** I am logged in
- **When** I click on my user avatar
- **Then** I see a dropdown with:
  - User Profile
  - Manage Inventory
  - My Bids
  - Logout

### AC-004: Logout
- **Given** I am logged in
- **When** I click "Logout" from the user dropdown
- **Then** I am logged out
- **And** the user avatar is replaced with a "Login" button

### AC-005: Navigation Menu Structure
- **Given** I am on any page
- **Then** the top menu shows:
  - Container Marketplace (public link)
  - Auctions (public link)
  - User Avatar/Login button (right-aligned, separate from main menu)

### AC-006: Non-Logged-In State
- **Given** I am not logged in
- **When** I try to access protected pages (e.g., /inventory, /maintenance/request)
- **Then** I am redirected to the login modal or homepage
- **And** I see a message prompting me to log in

---

## Technical Notes

- **Authentication Method:** Simple modal-based login (no OAuth/SSO for MVP)
- **Session Management:** Use browser localStorage or session cookies to persist login state
- **Protected Routes:** `/inventory/*`, `/maintenance/request`, user profile pages
- **Public Routes:** `/`, `/marketplace`, `/maintenance` (job board)

---

## UI/UX Requirements

### Top Navigation Bar
```
[Logo] [Container Marketplace] [Auctions]                    [User Avatar â–¼]
                                                              or [Login Button]
```

### User Dropdown (Logged In)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ John Doe         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ User Profile        â”‚
â”‚ Manage Inventory    â”‚
â”‚ My Bids             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Logout              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Login Modal
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Login to Your Account    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Email:                     â”‚
â”‚ [________________]         â”‚
â”‚                            â”‚
â”‚ Password:                  â”‚
â”‚ [________________]         â”‚
â”‚                            â”‚
â”‚ [Cancel]  [Login]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Out of Scope (MVP)
- Password reset/forgot password flow
- Social login (Google, Facebook)
- Two-factor authentication (2FA)
- Email verification
- Role-based access control (RBAC) - assume all users have same permissions for MVP
