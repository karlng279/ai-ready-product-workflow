# Interaction Flow: Auction Bidding Flow

**Interaction ID:** INT-001
**Interaction Name:** Auction Bidding Flow
**Component ID(s):** COMP-005 (Auction Detail)
**Wireframe ID(s):** WF-005
**Story ID(s):** ST-005
**Interaction Type:** Form Flow (Real-time)
**Theme Reference:** mds
**Theme File:** ../../../design-framework/themes/mds.md

---

## ui-ux-pro-max Prompt

Implement Auction Bidding Flow using MDS theme:

**Pattern:** Real-time Bidding Flow

**Theme Constraints:**
- Colors: Magenta (Primary) for new high bid, Red for errors/outbid.
- Animations: Pulse on price change.

**States to Implement:**
- **Idle:** Detail page loaded, timer ticking.
- **Bidding:** User entering amount.
- **Validating:** Checking increments (client-side).
- **Submitting:** Posting bid to API (Loading state).
- **Success:** Bid accepted, user is high bidder.
- **Outbid:** Another user placed higher bid (Real-time update).
- **Ended:** Auction closed.

**Transitions:**
- Idle -> Bidding: User focuses input.
- Bidding -> Submitting: Click "Place Bid".
- Submitting -> Success: API 200 OK.
- Any State -> Outbid: WebSocket event "new_bid".

**Data Flow:**
- API: POST /api/auctions/{id}/bid
- WebSocket: Channel "auction_{id}"
- Validation: Bid > Current Bid + Increment.

**Accessibility:**
- ARIA Live for Current Price updates.
- Focus management on Bid Input.

---

## 2. State Diagram

```
â†’ +------------------+   ws: new_bid   +------------------+
  | Idle (Viewing)   | <-------------> | Outbid Alert     |
  +------------------+                 +------------------+
         |                                      ^
         | focus input                          |
         v                                      |
  +------------------+   submit      +------------------+
  | Bidding (Typing) | ------------> | Submitting       |
  +------------------+               +------------------+
         ^                                      |
         | validation error                     | success
         |                                      v
  +------------------+                 +------------------+
  | Inline Error     |                 | Bidding Success  |
  +------------------+                 +------------------+
```

---

## 6. User Flow Description

**Happy Path:**
1. User views auction (Idle). Current Bid $100.
2. User types $150 (Bidding).
3. User clicks "Place Bid".
4. System validates (>$110). Transitions to Submitting.
5. API returns success.
6. UI updates Current Bid to $150. Shows "You are winning" badge.

**Real-time Update:**
1. User is viewing.
2. WebSocket receives event: { new_bid: 200, user: "Other" }.
3. UI flashes Current Price $200.
4. If User was winning, change status to "Outbid".

---

## 8. API Integration

### Endpoint: Place Bid
**URL:** `/api/auctions/{id}/bid`
**Method:** POST
**Body:** `{ amount: 150 }`
